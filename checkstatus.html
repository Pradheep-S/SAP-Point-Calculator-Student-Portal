<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOME</title>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="../style.css">
    <script src="../HeaderFooterManager.js"></script>
    <!-- Bootstrap 5.3 CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.5/css/dataTables.bootstrap5.css">
    <!-- Bootstrap 5.3 JavaScript -->
    <script src="https://code.jquery.com/jquery-3.7.1.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"
        defer></script>
    <script src="https://cdn.datatables.net/2.0.5/js/dataTables.js" defer></script>
    <script src="https://cdn.datatables.net/2.0.5/js/dataTables.bootstrap5.js" defer></script>
</head>

<body>
    <special-header></special-header>
    <div class="container">
        <div class="row">
            <div class="col-md-2 me-3">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Paper Presentation</button>
                    <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">Project Presentation</button>
                    <button class="nav-link" id="v-pills-contact-tab" data-bs-toggle="pill" data-bs-target="#v-pills-contact" type="button" role="tab" aria-controls="v-pills-contact" aria-selected="false">Techno-Managerial</button>
                    <button class="nav-link" id="v-pills-sports-tab" data-bs-toggle="pill" data-bs-target="#v-pills-sports" type="button" role="tab" aria-controls="v-pills-sports" aria-selected="false">Sports</button>
                    <button class="nav-link" id="v-pills-membership-tab" data-bs-toggle="pill" data-bs-target="#v-pills-membership" type="button" role="tab" aria-controls="v-pills-membership" aria-selected="false">Membership</button>
                    <button class="nav-link" id="v-pills-leadership-tab" data-bs-toggle="pill" data-bs-target="#v-pills-leadership" type="button" role="tab" aria-controls="v-pills-leadership" aria-selected="false">Leadership</button>
                    <button class="nav-link" id="v-pills-courses-tab" data-bs-toggle="pill" data-bs-target="#v-pills-courses" type="button" role="tab" aria-controls="v-pills-courses" aria-selected="false">VAC/Online Courses</button>
                    <button class="nav-link" id="v-pills-copyright-tab" data-bs-toggle="pill" data-bs-target="#v-pills-copyright" type="button" role="tab" aria-controls="v-pills-copyright" aria-selected="false">Patent/Copyright</button>
                    <button class="nav-link" id="v-pills-exams-tab" data-bs-toggle="pill" data-bs-target="#v-pills-exams" type="button" role="tab" aria-controls="v-pills-exams" aria-selected="false">GATE/CAT Exams</button>
                    <button class="nav-link" id="v-pills-internship-tab" data-bs-toggle="pill" data-bs-target="#v-pills-internship" type="button" role="tab" aria-controls="v-pills-internship" aria-selected="false">Internship</button>
                    <button class="nav-link" id="v-pills-entrepreneurship-tab" data-bs-toggle="pill" data-bs-target="#v-pills-entrepreneurship" type="button" role="tab" aria-controls="v-pills-entrepreneurship" aria-selected="false">Entrepreneurship</button>
                    <button class="nav-link" id="v-pills-activities-tab" data-bs-toggle="pill" data-bs-target="#v-pills-activities" type="button" role="tab" aria-controls="v-pills-activities" aria-selected="false">Social Activities</button>
                </div>
            </div>
            <div class="col-md-9">
                <div class="tab-content" id="v-pills-tabContent">
                    <div name="paper" class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                        <div class="container p-3" style="margin-left: 6.8%;">
                            <table id="paperTable" class="table table-striped" style="width:100%">
                                <thead id="paperThead">
                                    <tr id="paperTheadTr">
                                        
                                    </tr>
                                </thead>
                                <tbody id="paperTbody">
                                </tbody>
                                <tfoot id="paperTfoot">
                                    <tr id="paperTfootTr">
                                        
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div name="project" class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">Content for Project Presentation</div>
                    <div name="techno" class="tab-pane fade" id="v-pills-contact" role="tabpanel" aria-labelledby="v-pills-contact-tab">Content for Techno-Managerial</div>
                    <div name="sports" class="tab-pane fade" id="v-pills-sports" role="tabpanel" aria-labelledby="v-pills-sports-tab">Content for Sports</div>
                    <div name="membership" class="tab-pane fade" id="v-pills-membership" role="tabpanel" aria-labelledby="v-pills-membership-tab">Content for Membership</div>
                    <div name="leadership" class="tab-pane fade" id="v-pills-leadership" role="tabpanel" aria-labelledby="v-pills-leadership-tab">Content for Leadership</div>
                    <div name="courses" class="tab-pane fade" id="v-pills-courses" role="tabpanel" aria-labelledby="v-pills-courses-tab">Content for VAC/Online Courses</div>
                    <div name="patent" class="tab-pane fade" id="v-pills-copyright" role="tabpanel" aria-labelledby="v-pills-copyright-tab">Content for Patent/Copyright</div>
                    <div name="exams" class="tab-pane fade" id="v-pills-exams" role="tabpanel" aria-labelledby="v-pills-exams-tab">Content for GATE/CAT Exams</div>
                    <div name="intern" class="tab-pane fade" id="v-pills-internship" role="tabpanel" aria-labelledby="v-pills-internship-tab">Content for Internship</div>
                    <div name="entrepreneur" class="tab-pane fade" id="v-pills-entrepreneurship" role="tabpanel" aria-labelledby="v-pills-entrepreneurship-tab">Content for Entrepreneurship</div>
                    <div name="social" class="tab-pane fade" id="v-pills-activities" role="tabpanel" aria-labelledby="v-pills-activities-tab">Content for Social Activities</div>
                </div>
            </div>
        </div>
    </div>


    <script src="../js/bootstrap/bootstrap.bundle.min.js"></script>

    <script src="../formHandlers.js"></script>

    <script>

function keyValueToString(obj) {
    let result = "";
    for (const key in obj) {
        if (obj.hasOwnProperty(key)) {
            result += `<td>${obj[key]}</td>`;
        }
    }
    // Remove the trailing newline character if necessary
    if (result.length > 0) {
        result = result.slice(0, -1);
    }
        return result;
    }

function keyToString(obj) {
    let result = "";
    for (const key of obj) {
        result += `<th>${key}</th>`;
    }
    // Remove the trailing newline character if necessary
    if (result.length > 0) {
        result = result.slice(0, -1);
    }
        return result;
    }


        window.addEventListener('load', (event) => {
            var userDataJSON = getCookie('userData');

            var userData = JSON.parse(userDataJSON);

            const currentUrl = document.URL;
            
            // Create a new URL object
            const url = new URL(currentUrl);
            
            // Construct the base URL
            const baseUrl = `${url.protocol}//${url.host}/`;

            
            const paperinSubmissions = userData.submissions.filter(submission => submission.activity === "paperin");
            console.log(paperinSubmissions);

            paperinSubmissions.forEach(obj => {
                delete obj.activity
                obj.proof = `<a href='${baseUrl}/uploads/${obj.proof}'>view proof</a>`
            });

            document.getElementById("paperTheadTr").innerHTML = keyToString(Object.keys(paperinSubmissions[0]))
            document.getElementById("paperTfootTr").innerHTML = keyToString(Object.keys(paperinSubmissions[0]))

            for (let i = 0; i < paperinSubmissions.length; i++) {
                document.getElementById('paperTbody').innerHTML += `<tr>${keyValueToString(paperinSubmissions[i])}</tr>`
            }
            $('#paperTable').DataTable();
        });
    </script>
</body>

</html>